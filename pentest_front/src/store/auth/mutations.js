import {toStorage} from '../../utils';
import {savingValues} from './const';

export const mTypes = {
    UPDATE_TOKEN: 'UPDATE_TOKEN',
    CLEAR_TOKEN: 'CLEAR_TOKEN',
    UPDATE_USER_INFO: 'UPDATE_USER_INFO',
    UPDATE_USER_DATA: 'UPDATE_USER_DATA'
};

export const mutations = {
    [mTypes.CLEAR_TOKEN](state) {
        state.username = null;
        toStorage(savingValues.token, null);
    },

    [mTypes.UPDATE_TOKEN](state, token) {
        state.token = token.exp;
        toStorage(savingValues.token, token.exp);
    },

    [mTypes.UPDATE_USER_INFO](state, userInfo) {
        state.id = userInfo.user_id;
        toStorage(savingValues.id, userInfo.user_id);

        state.username = userInfo.username;
        toStorage(savingValues.username, userInfo.username);

        toStorage(savingValues.token, userInfo.exp);
    },

    [mTypes.UPDATE_USER_DATA](state, user) {
        state.firstName = user.first_name;
        toStorage(savingValues.firstName, user.first_name);

        state.lastName = user.last_name;
        toStorage(savingValues.lastName, user.last_name);
    }
};

