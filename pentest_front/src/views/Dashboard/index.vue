<template>
    <v-card class="ma-4">
        <v-card-title class="title">
            Commands
        </v-card-title>
        <v-row class="ma-0 pl-1 pr-1" justify="space-between">
            <v-col class="pr-5" cols="12" md="5" sm="12">
                <v-text-field @keydown.enter="add_tag"
                              clearable
                              dense
                              hint="Enter tag name and press enter"
                              outlined
                              placeholder="Tags"
                              prepend-inner-icon="mdi-filter-variant"
                              single-line
                              v-model="tag_input">
                </v-text-field>
                <v-row class="ma-0 pb-4">
                    <v-chip :key="tag"
                            @click:close="delete_tag(tag)"
                            class="mr-1 mb-1"
                            close
                            color="blue lighten-3"
                            label
                            v-for="tag in localFilter.tags">
                        {{tag}}
                    </v-chip>
                </v-row>
            </v-col>
            <v-col class="pl-5" cols="12" md="5" sm="12">
                <v-text-field clearable
                              dense
                              hint="Enter keywords with a space"
                              label="Search"
                              prepend-inner-icon="mdi-magnify"
                              single-line
                              v-model="localFilter.search">
                </v-text-field>
            </v-col>
        </v-row>
        <v-data-table :footer-props="footerOptions"
                      :headers="headers"
                      :items="items"
                      :items-per-page.sync="localPagination.rowsPerPage"
                      :loading="isLoading"
                      :options.sync="localPagination"
                      :server-items-length="localPagination.totalItems"
                      :sort-by.sync="localPagination.sortBy"
                      :sort-desc.sync="localPagination.sortDesc"
                      height="65vh"
                      style="border: 1px solid #a3a3a3">
            <template v-slot:body="{ items }">
                <tbody>
                <tr :key="item.id"
                    @click="$router.push(`/dashboard/${item.id}`)"
                    style="cursor: pointer"
                    v-for="item in items">
                    <td class="text-left">{{ item.id }}</td>
                    <td class="text-left">{{ item.command }}</td>
                    <td class="text-left">{{ item.description }}</td>
                    <td class="text-left">
                        <template v-if="item.tags.length > 0">
                            <v-chip :key="index"
                                    class="mr-1"
                                    color="blue lighten-3"
                                    label
                                    v-for="(tag, index) in item.tags">
                                {{tag.title ? tag.title: tag}}
                            </v-chip>
                        </template>
                        <template v-else> -no tags-</template>
                    </td>
                </tr>
                </tbody>
            </template>
        </v-data-table>
    </v-card>
</template>

<script lang="js" src="./script.js">
</script>

<style scoped>
</style>